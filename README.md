# Design-of-Toluene-Measurement-System-Based-on-Quartz-Crystal-Microbalance-QCM-Sensor-Coated-with-C
This project aims to design a measurement system of  toluene based on the frequency shift that occurs in a Quartz Crystal Microbalance (QCM) sensor that has been coated with Copper Phthalocyanine (CuPc). This system uses an Arduino Nano microcontroller as a data processing component Pierce oscillator as a QCM frequency measuring circuit, and DHT22 as a temperature and humidity sensor. 
The measurement results are displayed on the LCD or laptop using the USB port on the tool system.
# Instrumentation Design
The instrumentation design of the measurement system (Fig. 1) consists of a sensing element, signal conditioner unit, signal processing unit, and display unit. The sensing unit contains a quartz crystal placed in a box with the dimension of 7.7 x 5.0 x 2.5 cm3 [9]. The crystal frequency is 2.4576 MHz; 3.579 MHz; 4 MHz; 5.120 MHz; 6 MHz; 7.2 MHz; and 8 MHz, respectively. 
![Diagram Alir Prociding](https://user-images.githubusercontent.com/110672446/183291057-3771bae8-1aba-423f-9279-e2e983b527e2.jpg)
After passing through the sensing element, the quartz crystal is connected to the signal conditioning unit, which is the oscillator. The oscillator circuit used in this study, namely the Pierce oscillator as a signal conditioning circuit The Pierce oscillator circuit serves to drive the tested quartz crystal. The components arranged in the Pierce oscillator consist of a ¼ W 100 kΩ, 2.2 kΩ, 330 kΩ resistors; capacitors 220 pF, 100 pF, 0.1 µF; diode 1N4148; and the BC547 transistor. The oscillator receives a voltage of 9 Volts from the LM2596 3A buck converter, which also receives a supply voltage from a 12 Volt/3A power supply to produce an alternating waveform of a given frequency. The results of signal conditioning are processed on the Arduino Nano microcontroller by utilizing the Timer/Counter concept already available on the microcontroller. At the signal processing stage, information is generated in the form of crystal frequency displayed on the 16 x 2 LCD (Liquid Crystal Display) and the Arduino IDE Serial Monitor on a P.C./Laptop.
# Program Design
The software used in making the program is Arduino IDE. The Arduino Nano microcontroller starts processing instructions when a quartz crystal is an input. The microcontroller will initialize the interrupt pin and I2C on the LCD. On the Arduino Nano, the timers used are Timer 2 and Timer 5. Timer 2 provides a time calculation interval of 1 ms. The Prescaler value used to divide the source clock is 128. The 128 Prescaler value is considered appropriate because the Arduino ADC clock is between 50 kHz and 200 kHz. Arduino nano has a clock of 16 MHz [10], so the division clock value is 125 kHz. Enumeration with a speed of 125 kHz gives a time of 1 mS. Before timer 2 and timer 5 are activated, the Arduino gives a command to reset the Prescaler so that the signal count is on time. The external clock source on the Arduino Nano is located on timer 4 or pin D5, generating a clock signal in the rising edge state. After setting the timer, next conducted checking the quartz crystal to see whether it can perform period calculations or not. If not, the microcontroller will give a display output command that the value of f = 0. Furthermore, suppose the quartz crystal can read the period. In that case, the microcontroller will provide the following command, which is to read the total period calculation from the previous timer calculation through equation (1) so that the frequency value can be determined through Eq. (2).
	T = t/n	(1)

	f = 1/T	(2)
From the equation above, t refers to time, and n refers to the number of cycles or repeated events [11, 12]. The quartz crystal frequency reading results are displayed on the P.C./Laptop monitor serial display. The microcontroller also sends commands to the LCD via I2C communication to display the results of the reading characters.
# Performance Testing
The testing process in this study (Fig. 2) began with placing the quartz crystal in a sensor box 7.7 x 5.0 x 2.5 cm3. The quartz crystal in the box is connected to the Pierce oscillator to drive the quartz crystal to produce a frequency output signal. The signal from the Pierce oscillator is sent to the microcontroller for enumeration of the signal of the Pierce oscillator. After going through the process, the frequency response and the output signal by the quartz crystal can be determined. The overall design of the hardware is packaged into a single unit in plastic packaging.
![gambar alat proceeding](https://user-images.githubusercontent.com/110672446/183291169-7b9da29d-916e-479b-94ac-8125204c18f5.png)
# Result and Conclution
![Frequency between crystal and system](https://user-images.githubusercontent.com/110672446/183291269-354c1556-a5c7-44ac-809f-e81b020ccc9d.jpg)
The frequency measurement system of a quartz crystal has been developed using a Pierce oscillator. The system was compared to the digital oscilloscope for frequency measurement calibration. The correlation between the frequency measured by the system and the oscilloscope is found linearly with a correlation constant of 99.73%. The system can measure frequency from 2 MHz to 7.2 MHz with a response time of 1 second. The system also has an accuracy of 99.39% and a resolution of 1 Hz.
